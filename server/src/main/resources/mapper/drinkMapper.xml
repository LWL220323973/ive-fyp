<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.server.mapper.DrinkMapper">
    <select id="getDrink" resultType="com.server.model.Drink">
        SELECT * FROM drinks
        <where> 1=1 
            <if test="name_en_US != null and name_en_US != ''">
                AND (Name_en_US LIKE CONCAT(#{name_en_US}, '%'))
            </if>
            <if test="name_zh_HK != null and name_zh_HK != ''">
                AND (Name_zh_HK LIKE CONCAT(#{name_zh_HK}, '%'))
            </if>
            <if test="name_zh_CN != null and name_zh_CN != ''">
                AND (Name_zh_CN LIKE CONCAT(#{name_zh_CN}, '%'))
            </if>

            <if test="price != null and price != ''">
                AND (price = #{price})
            </if>

            <if test="onSale != null and onSale != ''">
                AND (onSale LIKE CONCAT('%', #{onSale}, '%'))
            </if>
        </where>
    </select>
</mapper>